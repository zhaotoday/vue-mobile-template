@import "~@/assets/styles/utils";

@include c(im-messages) {
  @include e(item) {
    @include clearfix;

    position: relative;
    padding-top: px2rpx(40px);

    @include s(is-me) {
      @include c(im-messages) {
        @include e(avatar) {
          right: px2rpx(30px);
        }

        @include e(body) {
          float: right;
          padding-right: px2rpx(20px + 80px + 30px);
        }

        @include e(message) {
          border-top-right-radius: 0;
          margin-left: px2rpx(30px + 80px + 20px);
          background-color: #9eea6a;
        }

        @include e(title) {
          text-align: right;
        }
      }
    }

    @include s(is-other) {
      @include c(im-messages) {
        @include e(avatar) {
          left: px2rpx(30px);
        }

        @include e(body) {
          float: left;
          padding-left: px2rpx(20px + 80px + 30px);
        }

        @include e(message) {
          border-top-left-radius: 0;
          margin-right: px2rpx(20px + 80px + 30px);
          background-color: white;
        }
      }
    }
  }

  @include e(avatar) {
    @include position--absolute(px2rpx(20px + 40px));
    @include size(px2rpx(80px), px2rpx(80px));

    border-radius: px2rpx(6px);
  }

  @include e(body) {
    @include padding(px2rpx(20px), null, px2rpx(30px));
  }

  @include e(time) {
    @include position--absolute(px2rpx(20px), null, null, 50%);

    transform: translateX(-50%);
    line-height: 100%;
    width: px2rpx(200px);
  }

  @include e(title) {
    line-height: 100%;
    padding-bottom: px2rpx(16px);
  }

  @include e(message) {
    position: relative;
    box-sizing: border-box;
    border: 1px solid map-get($colors, g4);
    padding: px2rpx(16px) px2rpx(20px);
    line-height: 140%;
    border-radius: px2rpx(20px);
    display: inline-block;
    min-width: px2rpx(100px);
    max-width: px2rpx(750px - (30px + 80px + 20px + 80px + 30px));
    word-wrap: break-word;
    word-break: normal;
  }

  @include e(image) {
    display: block;
    max-width: 100%;
    border-radius: px2rpx(4px);
  }

  @include e(retract) {
    @include position--absolute(0, null, null, px2rpx(-54px));
    @include circle(px2rpx(44px));

    background-color: map-get($colors, error);

    i {
      @include position--absolute(50%, null, null, 50%);

      transform: translateX(-50%) translateY(-50%);
      color: white;
    }
  }
}
